timeout: 1200s
steps:
- name: 'gcr.io/cloud-builders/docker'
  dir: 'docker/cli-tools'
  id: base
  entrypoint: 'make'
  env:                      
  - "VERSION=$_VERSION"     
  - "REGISTRY_URL=gcr.io/$PROJECT_ID"
  args:
  - 'base'
- name: 'gcr.io/cloud-builders/docker'
  dir: 'docker/cli-tools'
  entrypoint: 'make'
  waitFor: ["base"]
  env:                    
  - "REGISTRY_URL=gcr.io/$PROJECT_ID"
  - "VERSION=$_VERSION"    
  args:
  - 'git-server'
- name: 'gcr.io/cloud-builders/docker'
  dir: 'docker/cli-tools'
  entrypoint: 'make'
  waitFor: ["base"]
  env:                    
  - "REGISTRY_URL=gcr.io/$PROJECT_ID"
  - "VERSION=$_VERSION"    
  args:
  - 'toolbox'
- name: 'gcr.io/cloud-builders/docker'
  dir: 'docker/cli-tools'
  entrypoint: 'make'
  waitFor: ["base"]
  env:                    
  - "REGISTRY_URL=gcr.io/$PROJECT_ID"
  - "VERSION=$_VERSION"    
  args:
  - 'debug'
- name: 'gcr.io/cloud-builders/docker'
  dir: 'docker/cli-tools'
  entrypoint: 'make'
  waitFor: ["base"]
  env:                    
  - "REGISTRY_URL=gcr.io/$PROJECT_ID"
  - "VERSION=$_VERSION"    
  args:
    - 'repo'
