#!/usr/bin/env python
import tempfile
from pathlib import Path

import utils

temp_dir = tempfile.TemporaryDirectory()

temp_dir_name = "pipeline-dev"

utils.clone_pipeline_images(temp_dir_name)

pipeline_dir = Path(temp_dir_name)

# products by name
product_images = {}
for p in pipeline_dir.rglob('*.json'):
    product_images[p.stem] = { 'product_image_config': p }

for product_name, product_path in product_images.items():
    docker_file = Path(f'docker/7.0/{product_name}').rglob('**/Dockerfile')
    for docker_file in docker_files:
        with open(i, 'w') as f:
            exit()
