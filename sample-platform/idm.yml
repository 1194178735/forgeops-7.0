apiVersion: v1
kind: Pod
metadata:
  name: idm
  labels:
    role: management
spec:
  containers:
    - image: idm:fullstack
      imagePullPolicy: IfNotPresent
      name: openidm
      env:
      - name: IDP_FACEBOOK_CLIENTID
        valueFrom:
          secretKeyRef:
            name: social-credentials
            key: IDP_FACEBOOK_CLIENTID
      - name: IDP_FACEBOOK_CLIENTSECRET
        valueFrom:
          secretKeyRef:
            name: social-credentials
            key: IDP_FACEBOOK_CLIENTSECRET
      - name: OPENIDM_ANONYMOUS_PASSWORD
        value: "anonymous"
      - name: OPENIDM_ADMIN_PASSWORD
        value: "openidm-admin"
      ports:
        - containerPort: 8080
          name: http
          protocol: TCP
      resources:
          requests:
            memory: "512Mi"
